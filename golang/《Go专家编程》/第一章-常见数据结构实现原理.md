## channel

- channel是Golang在语言层面提供的Goroutine键的通信方式，比Unix管道更易用也更轻便，channel主要用于进程内各goroutine间通信，如果要跨进程通信，建议使用分布式系统的方法来解决。

  ### 1.chan数据结构定义

  ```go
  //src/runtime/chan/.go:hchan定义了channel的数据结构
  type hchan struct {
      qcount unit 		//当前队列中剩余元素个数
      dataqsiz unit 		//环形队列长度（可存放的元素个数）
      buf unsafe.Pointer	//环形队列指针
      elemsize uint16		//每个元素大小
      closed unit32		//标识关闭状态
      elemtype *_type		//元素类型
      sendx unit			//队尾指针下标，写入时的位置（指向空位置）
      recvx unit			//队首指针下标，读出时的位置
      recvq waitq			//等待读消息的goroutine队列
      sendq waitq			//等待写消息的goroutine队列
      lock mutex			//互斥锁，chan不允许并发读写
  }
  ```

  



