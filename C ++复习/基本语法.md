# C++基本语法

## 1.C++关键字（2017标准）

| alignas    | continue     | friend    | register         | true     |
| ---------- | ------------ | --------- | ---------------- | -------- |
| alignof    | decltype     | goto      | reinterpret_cast | try      |
| asm        | default      | if        | return           | typedef  |
| auto       | delete       | inline    | short            | typeid   |
| bool       | double       | int       | signed           | typename |
| break      | do           | long      | sizeof           | union    |
| case       | dynamic_cast | mutable   | static           | unsigned |
| catch      | else         | namespace | static_assert    | using    |
| char       | enum         | new       | statuc_cast      | virtual  |
| char16_t   | explicit     | noexcept  | struct           | void     |
| char32_t   | export       | nullptr   | switch           | vplatile |
| class      | extern       | operator  | template         | wchar_t  |
| const      | false        | private   | this             | while    |
| constexpr  | float        | protected | thread_local     |          |
| const_cast | for          | public    | throw            |          |

- char 8位，表示ascii字符信息

- char16_t 16位，表示UTF-16字符信息，直接使用char16_t之后用cout不能直接输出中文字符，而是输出编码信息，char32_t同（取决于编译器类型）

- char32_t 32位，表示UTF-32信息

- wchar_t Windows扩展字符类型，可能被编译成char16_t或者char32_t

- 使用wcout输出汉字信息：建议使用wchar_t和wcout实现国际文字的输出
  1.导入locale库，2.输入前调用setlocale(LC_ALL,"chs"),3.使用wcout输出汉字信息

  注意：赋值时记得添加前缀转换符“u","U","L"

```c++
#include <iostream>
#include<locale>
using namespace std;

int main() {
	char16_t ch16 = u'马';
	char32_t ch32 = U'忠';
	wchar_t chw = L'平';	//加L转义
	setlocale(LC_ALL,"chs");
	wcout <<ch16<<" "<< ch32<<" "<<chw;	//输出39532 24544 平 (前两个是汉字编码)
	return 0;
}
```

- this和nullptr的类型随类的类型变化而变化，nullptr可以赋值任意类型的指针（表示空），this是任何类的对象的指针
- 某些单词有对应的可替代的关键字 && 与 and，||与 or，! 与 not，^ 与 xor

```c++
cout << not (14 > 12 and 43 < 5); //输出 1
```

## 2.预定义类型

- **类型名**

  void，bool，char，short，int，long，float，double

- **符号**

  signed，unsigned（默认有符号）

- **储存位置特性**

  auto -局部变量，在栈段分配内存（默认使用）

  register	-寄存器变量（尽量使用寄存器，寄存器不够用时与auto同义）

  static -静态变量，编译后在数据段内分配内存

  extern -全局变量，编译后在数据段内分配内存

- **储存可变特性**

  const

  constexpr

  volatile

  mutable

void*指针类型表示未知指针类型，可以指向任意类型的元素的地址。使用void *指针对指向的对象赋值时，需要指定类型(强转)

```c++
int a = 1;
void*p = &a;
*(int *)p = 6;	//强转成p，再进行赋值
```

sizeof运算符可获得类型占用的字节数

- 类型long double在不同编译器实现情况不一样，通常为12或16字节，也可能与double相同，国际标准只规定sizeof(long double) >= sizeof(double)

- sizeof运算符的参数可以为常数，参数为常数时，整数视作int类型，浮点数视作double类型

```c++
cout << sizeof(2)<<" "<<sizeof(3.4); //4 8
```

## 3.类型转换

算数运算时，可能会进行自动类型转换

- 类型不同的元素之间计算时会先转换成同一类型再进行计算，通常按照字节数增加的方式进行转换，确保没有精度损失
- 若两种字节数相同的数据
- 两种字节数相同的数据之间进行计算，一种无符号另一种有符号，则全先转换成**无符号数**，再进行计算。
- 所有浮点类型运算都按double类型进行计算。即使是两个float类型的数之间进行计算，也需要先转换成double再进行计算。
- 所有整型数运算（bool，char，short）类型运算都先转换成int类型再进行计算
- 赋值时若左边类型字节数较小，则会出现切断操作，从而丢失部分数据。浮点数会进行四舍五入，丢失精度。整型数会截断高位。
- 低字节数赋给高字节变量，有符号数会按符号位进行扩展，无符号数直接扩展。
- 转换路线——char->unsigned char->short->unsigned short->int->unsigned int->long->unsigned long->float->double->long double

有时也会出现强制类型转换：

- 高字节值赋给低字节——阶段操作
- 也可以显式强行转换

常量表达式会在编译时进行计算，不会影响运行性能。

#### 4.预定义类型

###### 1.bool

- 占用1字节，仅有true，false两种常量，C++通常将true视作1，false视作0

###### 2.char

- 1字节，字符常量可用**‘\12’**的形式表示，或者可以用八进制**'\027'**、16进制**'\x27'**

- 对char16_t赋值时，常量需要加前缀u，对char32_t要加U，对wchar_t要加L

---

常量数字在书写时需要注意是否超过int类型范围，否则需要添加后缀：U--无符号，L--长整型，UL或LU--无符号长整型

常量数字通常也可以添加前缀：0--八进制，0x--16进制

对于浮点类型数通常也有加后缀的写法：f--float类型，L--long double类型，也可以使用科学计数法：0.34E-10

## 4.变量及类型解析

变量说明的一般形式为：

​	**extern存储可变特性 类型名 变量名;**

- extern表示变量说明

储存可变特性：const、constexpr、volatile、mutable

| const     |                                               |
| --------- | --------------------------------------------- |
| constexpr |                                               |
| volatile  | 易变型变量，可能在其他进程进行修改            |
| mutable   | mutable通常只在extern不出现时说明实例数据成员 |

- const volatile/constexpr volatile表示变量不会在当前进程中进行修改但可能在其他进程中进行修改

- 同一变量或函数可以被重复说明多次，但不可以被重复定义多次，通常变量函数说明放在.h文件中，可以被多个cpp文件重复include，而若.h文件中出现了变量定义，则不能被多个cpp文件include



变量定义的一般形式：

​	**储存位置特性 储存可变特性 类型名 变量名 = 初始值;**



- 常量表达式——编译时可计算得到结果的表达式（sizeof关键字也是常量表达式）

- 提倡在一个cpp文件中定义变量，在h文件和其他cpp文件中用extern说明该变量
- 模块变量——带static关键字修饰的变量，只能在当前文件中访问（文件作用域）
- const与constexpr均可用于修饰只读变量
  - const修饰的只读变量可以使用非常量表达式来初始化
  - constexpr关键字修饰的只读变量必须使用常量表达式来初始化；constexpr不可用于修饰函数参数，但可用于任何非虚函数的前面，这样定义的函数默认当作inline函数，并比inline函数有更强的代码优化功能。
- 
