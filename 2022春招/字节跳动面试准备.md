# 字节跳动面试准备

## 一、面经一

一面

- **进程和线程，细节、区别、原理**



- **TPC和UDP，是否双工等**
- **HTTPs和HTTP协议的细节和不同，比如HTTPs的公钥私钥**
- **三次四次握手**
- **智能指针的细节**
- **二叉树遍历的非递归写法，现场写**
- **多线程的具体使用和各种同步方法的优劣和不同**
- **进程间通信的方法，和socket的不同和相同点**
- **不同操作系统下的进程间通信**

二面

- `malloc`和`alloc`的底层细节
- **内存相关，如内存碎片管理和STL大内存的搬运方式，如何优化的，为什么需要优化和内存池等细节**
- **STL相关很多细节**
- **一个中等难度的算法题**
- **我额外讲了一下操作系统分页方式导致STL内存池的构建**



三面

- **内存管理相关细节**
- **几个代码题，实现智能指针**

## 二、面经二

- **介绍一下你自己**
- **有哪些排序算法**           答：（排序算法都没准备）冒泡、选择、快排、归并等
- **手写一下快排和归并排序，给你10分钟**                   答：没准备，写了20分钟只写出了快拍。。。（漫长的沉默）
- **数据库会吗？**              答：了解一点。
- **数据库ACID知道吗?**



- **数据库用什么数据结构实现的？ ** B+树

- 那**数据库联结操作**知道吗？等值联结？

答：好像忘了。应该是表合并吧。

- 没错，就是将两个表相同键值的元素拼接起来。你**实现一下这个等值联结**，怎么实现？输入的列的某值，输出是整行元素。

- 5.操作系统linux会吗？

- **755什么意思？**

- **进程和线程有什么区别？**
  进程是程序的一次执行，是资源调度单位，一个进程一个PCB；线程更轻量级，可以使用资源，但不能调度资源。

- 那**虚函数和普通函数有什么区别**？
- 问**项目中有没有用数据库**
- 那就是数据库底层不了解咯？           答：对的。
- 那SQL语句会吗                        答：了解一点。
  求：一个班级，某科目的平均成绩大于某值，的科目内容。说明一下SQL语句思路。
         答： SELECT 科目 WHERE 班级=XXX AND AVERAGE(SUBJECT)>XXX

       错了，因为你不知科目有几门
    
       答：建表的时候，几列就表示有几门课（其实SQL语句都忘了）

- **哈希算法用什么数据结构好**。

       答：数组。

- **哈希的时候，如何删除元素？**
  答：哈希下去，到表尾删除元素，或者找到元素，将标记位更改。

- **哈希这个动作是线程安全的吗？**

答：读动作是安全的，写动作不安全，可以加锁。

- **给每个数组中的位置分别加锁，还是一个数组加一把锁。**

答：应该都可以，前者方便，后者可以实现更多的线程并发，但可能产生死锁。

- 写一下**线程的单例设计模式**吧。
  答：balalal。（好像写错了）

- **100W个数，找出前10个最小的。**

- 长度为N的链表，隔K个数反转一次，例如123456，K为3就会变成321654 —— （头插法，尾插法混合使用）



## 三、面试准备

### （一）.数据库相关

#### 1. 数据库三范式是什么?

第一范式：表中每个字段都不能再分。（**每列不能再分**）

第二范式：满足第一范式并且表中的非主键字段都依赖于主键字段。（**每列依赖主键**）—— **消除部分依赖**

第三范式：满足第二范式并且表中的非主键字段必须不传递依赖于主键字段。（**非主键不传递依赖与主键**）—— **消除传递依赖**

BC范式：3NF的基础上 + **每一个决定因素都包含码，不能只是码的一部分**

#### 2. 什么是数据库事务？ACID

- 事务具有**四大特性**（数据库事物正确执行的四个要素）：

**原子性（atomicity）** 一个事务中的所有操作要么全部完成，要么全部不完成，（未执行完就会恢复Rollback）

**一致性（consistency）** 数据库完整性不会因为事务的执行而被破坏

**隔离性（isolation）** 数据库允许多个并发事务同时对数据进行读写和修改的能力，隔离性可以防止并发执行多个事务时由于交叉执行而导致的数据不一致。

**持久性（durability）** 事务处理结束后，对数据的修改使永久的，即便系统故障也不会丢失。

- 数据库事务的三个常用命令：Begin Transaction、Commit Transaction、RollBack Transaction。

#### 3. 什么是视图？

视图实际上是在数据库中通过Select查询语句从多张表中提取的多个表字段所组成的虚拟表。

l 视图并不占据物理空间，所以通过视图查询出的记录并非保存在视图中，而是保存在原表中。

l 通过视图可以对指定用户隐藏相应的表字段，起到保护数据的作用。

l 在满足一定条件时，可以通过视图对原表中的记录进行增删改操作。

l 创建视图时，只能使用单条select查询语句。

#### 4. 什么是索引？

索引是对数据库表中一列或多列的值进行排序的一种结构，使用索引可快速访问数据库表中的特定信息。

l 索引分为：聚集索引、非聚集索引、唯一索引等。

l 一张表可以有多个唯一索引和非聚集索引，但最多只能有一个聚集索引。

l 索引可以包含多列。

l 合理的创建索引能够提升查询语句的执行效率，但降低了新增、删除操作的速度，同时也会消耗一定的数据库物理空间。

#### 5. 什么是存储过程？

存储过程是一个预编译的SQL语句，优点是允许模块化的设计，就是说只需创建一次，以后在该程序中就可以调用多次。如果某次操作需要执行多次SQL，使用存储过程比单纯SQL语句执行要快。

#### 6. 什么是触发器？

触发器是一中特殊的存储过程，主要是通过事件来触发而被执行的。它可以强化约束，来维护数据的完整性和一致性，可以跟踪数据库内的操作从而不允许未经许可的更新和变化。可以联级运算。如，某表上的触发器上包含对另一个表的数据操作，而该操作又会导致该表触发器被触发。

#### 7. 写出一条Sql语句：取出表A中第31到第40记录 （MS-SQLServer）

解1：select top 10 * from A where id not in (select top 30 id from A)

解2：select top 10 * from A where id > (select max(id) from (select top 30 id from A )as A)

解3：select * from (select *, Row_Number() OVER (ORDER BY id asc) rowid FROM A) as A where rowid between 31 and 40

#### 8. 写出一条Sql语句：取出表A中第31到第40记录 （Mysql）

select * from A limit 30, 10

#### 9. 写出一条Sql语句：取出表A中第31到第40记录 （Oracle）

select *

from (select A.*,

  row_number() over (order by id asc) rank

  FROM A)  

where rank >=31 AND rank<=40;

#### 10. 在关系型数据库中如何描述多对多的关系?

在关系型数据库中描述多对多的关系,需要建立第三张数据表。比如学生选课,需要在学生信息表和课程信息表的基础上,再建立选课信息表,该表中存放学生Id和课程Id。

#### 11. 什么是数据库约束,常见的约束有哪几种?

数据库约束用于保证数据库表数据的完整性（正确性和一致性）。可以通过定义约束\索引\触发器来保证数据的完整性。

总体来讲,约束可以分为:

主键约束：primary key；

外键约束：foreign key；

唯一约束：unique；

检查约束：check；

空值约束：not null；

默认值约束：default；

#### 12. 列举几种常用的聚合函数?

Sum:求和\ Avg:求平均数\ Max:求最大值\ Min:求最小值\ Count:求记录数

#### 13. 什么是内联接、左外联接、右外联接？

l 内联接（Inner Join）：匹配2张表中相关联的记录。

l 左外联接（Left Outer Join）：除了匹配2张表中相关联的记录外，还会匹配左表中剩余的记录，右表中未匹配到的字段用NULL表示。

l 右外联接（Right Outer Join）：除了匹配2张表中相关联的记录外，还会匹配右表中剩余的记录，左表中未匹配到的字段用NULL表示。

在判定左表和右表时，要根据表名出现在Outer Join的左右位置关系。

#### 14. 如何在删除主表记录时，一并删除从表相关联的记录？

如果两张表存在主外键关系，那么在删除主键表的记录时，如果从表有相关联的记录，那么将导致删除失败。

在定义外键约束时，可以同时指定3种删除策略：一是将从表记录一并删除（级联删除）；二是将从表记录外键字段设置为NULL；三是将从表记录外键字段设置为默认值。

级联删除示例：

alter table 从表名add constraint 外键名foreign key(字段名) references 主表名(字段名)on delete cascade

#### 15. 什么是游标？

游标实际上是一种能从包括多条数据记录的结果集中每次提取一条记录进行处理的机制。

游标的使用步骤：

\1. 定义游标：declare cursor 游标名称 for  select查询语句 [for {readonly|update}]

\2. 打开游标：open cursor

\3. 从游标中操作数据：fetch... ...  current of cursor

 

\4. 关闭游标：close cursor

#### 16. 数据库系统的三级模式结构

- **外模式（多个） ** —— 数据库**用户能够看见和使用**的局部数据的逻辑结构和特征的描述，数据库用户的数据视图（**用户视图**），**与某一应用相关**，类型的描述
- **模式（一个）** —— 全体数据的逻辑结构和特征的描述，真实的表信息
- **内模式（一个）** —— 存储模式，数据在数据库内部的组织方式

三级模式之间存在两级模式映像，分别保证数据与程序的**逻辑独立性**、数据与程序的**物理独立性**

#### 17.数据库的隔离级别

- **读未提交（Read Uncommitted）**

  select语句不加锁，可能读取到不一致的数据，即“**读脏**”。该级别并发最高，一致性最差

- **读已提交（Read Committed）**

  避免“脏读”

- **可重复读（Repeatable read）**

  MySQL默认级别

  避免“脏读”，“不可重复读”

- **串行化（Serializable）**

  避免“脏读”、“不可重复读”、“幻读”。***Serializable*** 这样的级别，就是以 ***锁表*** 的方式进行并发同步控制

MYSQL支持以上四种，默认为Repeatable read。Oracle数据库只支持Serializable和read committed两种级别，默认为read committed

```mysql
set tx_isolation='read-uncommitted'; //设置隔离级别
select @@tx_isolation;				//查询隔离级别
```

#### 18.不考虑隔离性的后果

- **脏读**

  一个事务在处理数据的过程中，读取到另一个为提交事务的数据。（例如事务一在执行后rollback而不提交，而事务二却能读取到事务一修改的数据的中间值）

- **不可重复读**

  不可重复读是指对于数据库中的某个数据，**一个事务范围内的多次查询**却返回了不同的结果，这是由于在查询过程中，数据被另外一个事务修改并提交了。

- **幻读**

  幻读是事务非独立执行时发生的一种现象。例如事务T1对一个表中所有的行的某个数据项做了从“1”修改为“2”的操作，这时事务T2又对这个表中插入了一行数据项，而这个数据项的数值还是为“1”并且提交给数据库。而操作事务T1的用户如果再查看刚刚修改的数据，会发现还有一行没有修改，其实这行是从事务T2中添加的，就好像产生幻觉一样，这就是发生了幻读。

幻读和不可重复读都是读取了另一条已经提交的事务（这点就脏读不同），所不同的是不可重复读查询的都是同一个数据项，而幻读针对的是一批数据整体（比如数据的个数）。



#### 19.关系完整性

- **实体完整性** 主属性非空
- **参照完整性** 外码要么为空，要么等于一个关系的一个元组的主属性
- **用户自定义完整性** 



### （二）.关系数据库标准语言

#### 1.定义模式

```mySQL
CREATE SCHEMA <模式名> AUTHORIZATION <用户名> [ <表定义子句> | <视图定义子句> | <授权定义子句> ];
```

#### 2.删除模式

```mySQL
DROP SCHEMA <模式名> <CASCADE|RESTRICT>
```

- CASCADE **级联删除**，删除模式的同时将模式中的数据库对象全部删除
- RESTRICT **限制删除**，如果该模式中已经定义了下属的数据库对象（表、视图等），则拒绝执行。（与表的删除不同，必须二选一）

#### 3.表定义、删除、修改

定义基本表

```mysql
CREATE TABLE <表名> (<列名> <数据类型> [列级完整性约束条件]
                  	[<列名> <数据类型> [列级完整性约束]]
                  	...
                  	[,<表级完整性约束>])
```

- 常见列级完整性约束
  - PRIMARY KEY 主码，主码约束
  - UNIQUE 唯一
  - NOT NULL 非空
- 常见表级完整性约束
  - FOREIGN KEY (列名) REFERENCES 表名(列名)	—— 参照表和被参照表可以是同一个
  - CHECK 子句